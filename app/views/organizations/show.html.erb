<div class="container">
  <div class="organization-info">
    <h1><%= @organization.name %></h1>
    <!-- Organization photo? -->
  </div>

  <span><%= link_to 'Inbox', organization_messages_path(@organization) %></span>

  <div class="pet-owner-list">
    <h3>approved pet owners</h3>
    <ul class="pet-owners-approved">
      <% @organization.try(:approved_pairings).try(:each) do |approved_pairing| %>
        <li><%= approved_pairing.pet_owner.full_name %></li>
      <% end %>
    </ul>

    <ul class="pet-owners-pending">
      <h3>pending pet owners</h3>
      <% @organization.try(:pending_pairings).try(:each) do |pending_pairing| %>
        <li><%= pending_pairing.pet_owner.full_name %>
        <button id='approve_pet_owner' onclick="location.href='http://localhost:3000/organizations/<%= @organization.id %>/pairings/<%= pending_pairing.id %>/edit';">Approve Owner</button></li>
      <% end %>
    </ul>
  </div>

  <div class="event-list">
    <h3>available events</h3>
    <div class="approved-events">
      <% if @organization.try(:approved_events).try(:length) > 0 %>
        <h3>from approved pet-owners</h3>
        <table>
          <thead>
            <tr>
              <th>Day</th>
              <th>Time available</th>
              <th>Pet owner</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @organization.approved_events.each do |approved_event| %>
              <tr>
                <td><%= approved_event.date.to_s %></td>
                <td><%= approved_event.start_time.to_s %> - <%= approved_event.end_time.to_s %></td>
                <td><%= approved_event.pet_owner.full_name %></td>
                <td><%= link_to 'Show', user_event_path(approved_event.pet_owner.id, approved_event) %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% end %>
    </div>

    <div class="pending-events">
      <h3>from pet-owners pending approval</h3>
      <% if @organization.try(:pending_events).try(:length) > 0 %>
        <table>
          <thead>
            <tr>
              <th>Day</th>
              <th>Time available</th>
              <th>Pet owner</th>
              <th colspan="3"></th>
            </tr>
          </thead>

          <tbody>
            <% @organization.pending_events.each do |pending_event| %>
              <tr>
                <td><%= pending_event.date.to_s %></td>
                <td><%= pending_event.start_time.to_s %> - <%= pending_event.end_time %></td>
                <td><%= pending_event.pet_owner.full_name.to_s %></td>
                <td><%= link_to 'Show', event_path(pending_event) %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% end %>
    </div>
  </div>
</div>
